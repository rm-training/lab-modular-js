<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <link rel="stylesheet" href="css/vendor/bootstrap.min.css">
        <!-- <link rel="stylesheet" href="css/main.css"> -->
    </head>
    <body>
        <!--[if lte IE 9]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
        <![endif]-->

        <!-- Add your site or application content here -->

        <div class="container-fluid">

            <div class="row justify-content-md-center">
                <div class="col-md-4">
                    <h1>Stuff to do!</h1>

                    <div class="card bg-light">
                        <form id="todo-form" class="card-body" novalidate>
                          <div class="form-group">
                            <label for="todo-title">Title</label>
                            <input name="title" type="text" class="form-control" id="todo-title" placeholder="Title">
                          </div>
                          <div class="form-group">
                            <label for="description">Description</label>
                            <input name="description" type="text" class="form-control" id="todo-description" placeholder="Description">
                          </div>
                          <div class="checkbox">
                            <label>
                              <input type="checkbox" name="is-urgent" value="1"> Urgent
                            </label>
                          </div>
                          <button type="submit" class="btn btn-primary">Add</button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="row justify-content-md-center">
                <div class="col-md-4">

                    <ul id="todo-items">
                    </ul>
                    <!-- <div class="list-group">

                      <a href="#" class="list-group-item list-group-item-action flex-column align-items-start active">
                        <div class="d-flex w-100 justify-content-between">
                          <h5 class="mb-1">List group item heading</h5>
                          <small>3 days ago</small>
                        </div>
                        <p class="mb-1">Donec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus varius blandit.</p>
                        <small>Donec id elit non mi porta.</small>
                      </a>

                    </div>-->

                </div>
            </div>
        </div>

        <script src="js/vendor/jquery.min.js"></script>
        <script src="js/vendor/popper.min.js"></script>
        <script src="js/vendor/bootstrap.min.js"></script>

        <script>

            'use strict';

            $(function() {
                // start building stuff

                console.log('Hello World');

                const $todoForm = $('#todo-form');
                const $todoItemList = $('#todo-items');

                $todoForm.on('submit', (e) => {
                    e.preventDefault();

                    // create a new todo item in the list
                    let isValid = false;
                    const todoItem = {
                        title: $todoForm.find('input[name=title]').val(),
                        description: $todoForm.find('input[name=description]').val(),
                        isUrgent: $todoForm.find('input[name="is-urgent"]').val()
                    }

                    // validate
                    console.log('Validating');

                    if (!todoItem.title) {
                        isValid = false;
                        $todoForm
                            .find('input[name=title]')
                            .addClass('is-invalid')
                            .parent()
                            .append(
                                '<div class="invalid-feedback">Please give a title.</div>'
                            );
                    }

                    if (!todoItem.description) {
                        isValid = false;
                        $todoForm
                            .find('input[name=description]')
                            .addClass('is-invalid')
                            .parent()
                            .append(
                                '<div class="invalid-feedback">Please give a description.</div>'
                            );
                    }

                    if (!isValid) {
                        return;
                    }

                    console.log('Item about to be added:', todoItem);

                    // add it into the markup

                    $todoItemList.append(`<li>${todoItem.title}</li>`);

                    // @todo save it to the database

                    // clear the form
                    $todoForm.trigger('reset');
                });


            });
        </script>

    </body>
</html>
